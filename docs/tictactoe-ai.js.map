{"version":3,"sources":["webpack:///docs/tictactoe-ai.js","webpack:///webpack/bootstrap 5e82e64b58574cd7f87c","webpack:///./src/index.ts","webpack:///./src/search/index.ts","webpack:///./src/moves.ts","webpack:///./src/evaluation/index.ts","webpack:///./src/evaluation/helpers.ts","webpack:///./src/utils/index.ts","webpack:///./src/utils/helpers.ts","webpack:///./src/game/index.ts","webpack:///./src/game/helpers.ts","webpack:///./src/search/alphaBeta.ts"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","search_1","Object","defineProperty","value","default","getBestMove","grid","forX","depth","moves","moves_1","getMoves","undefined","length","isX","movesWithScores","map","move","newGrid","game_1","makeMove","evaluation","alphaBeta_1","alphaBeta","Infinity","evaluation_1","evaluate","hasGameEnded","score","sortedMovesWithScores","sort","a","b","sortedMoves","x","index","filter","helpers_1","evaluateRows","evaluateColumns","evaluateDiagonals","utils_1","getRows","evaluateCells","reduce","y","getColumns","getDiagonals","cells","initial","true","false","counts","cell","increment","Math","pow","obj","key","newObj","prop","hasOwnProperty","getArray","Array","apply","Number","size","sqrt","copy","concat","splice","transpose","lesser","last","i","floor","nextValue","newValue","hasXWon","hasOWon","isDraw","doesAnyArrayHaveAll","cellsArray","some","every","hasWon","node","alpha","beta","isMaximizingPlayer","isTerminalNode","getChildren","score_1","children_1","child","max","children","min"],"mappings":"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","file":"./docs/tictactoe-ai.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar search_1 = __webpack_require__(1);\r\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\r\n\texports.default = {\r\n\t    getBestMove: search_1.getBestMove\r\n\t};\r\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar moves_1 = __webpack_require__(2);\r\n\tvar evaluation_1 = __webpack_require__(3);\r\n\tvar game_1 = __webpack_require__(7);\r\n\tvar alphaBeta_1 = __webpack_require__(9);\r\n\tfunction getBestMove(grid, forX, depth) {\r\n\t    var moves = moves_1.getMoves(grid);\r\n\t    if (depth == undefined)\r\n\t        depth = moves.length;\r\n\t    var isX = forX(grid);\r\n\t    var movesWithScores = moves.map(function (move) {\r\n\t        var newGrid = game_1.makeMove(grid, move, forX);\r\n\t        var evaluation = alphaBeta_1.alphaBeta(newGrid, depth, -Infinity, Infinity, !isX, evaluation_1.evaluate, game_1.hasGameEnded, function (grid) { return moves_1.getMoves(grid).map(function (move) { return game_1.makeMove(grid, move, forX); }); });\r\n\t        return {\r\n\t            move: move,\r\n\t            score: isX ? evaluation : -evaluation\r\n\t        };\r\n\t    });\r\n\t    var sortedMovesWithScores = movesWithScores.sort(function (a, b) { return b.score - a.score; });\r\n\t    var sortedMoves = sortedMovesWithScores.map(function (x) { return x.move; });\r\n\t    // Return the move with the best evaluation so far\r\n\t    return sortedMoves[0];\r\n\t}\r\n\texports.getBestMove = getBestMove;\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tfunction getMoves(grid) {\r\n\t    return grid\r\n\t        .map(function (value, index) { return value == undefined ? index : undefined; })\r\n\t        .filter(function (value) { return value != undefined; });\r\n\t}\r\n\texports.getMoves = getMoves;\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar helpers_1 = __webpack_require__(4);\r\n\tfunction evaluate(grid) {\r\n\t    return helpers_1.evaluateRows(grid) + helpers_1.evaluateColumns(grid) + helpers_1.evaluateDiagonals(grid);\r\n\t}\r\n\texports.evaluate = evaluate;\r\n\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar utils_1 = __webpack_require__(5);\r\n\tfunction evaluateRows(grid) {\r\n\t    return utils_1.getRows(grid)\r\n\t        .map(evaluateCells)\r\n\t        .reduce(function (x, y) { return x + y; }, 0);\r\n\t}\r\n\texports.evaluateRows = evaluateRows;\r\n\tfunction evaluateColumns(grid) {\r\n\t    return utils_1.getColumns(grid)\r\n\t        .map(evaluateCells)\r\n\t        .reduce(function (x, y) { return x + y; }, 0);\r\n\t}\r\n\texports.evaluateColumns = evaluateColumns;\r\n\tfunction evaluateDiagonals(grid) {\r\n\t    return utils_1.getDiagonals(grid)\r\n\t        .map(evaluateCells)\r\n\t        .reduce(function (x, y) { return x + y; }, 0);\r\n\t}\r\n\texports.evaluateDiagonals = evaluateDiagonals;\r\n\tfunction evaluateCells(cells) {\r\n\t    var length = cells.length;\r\n\t    if (length === 0)\r\n\t        return 0;\r\n\t    var initial = { undefined: 0, true: 0, false: 0 };\r\n\t    var counts = cells.reduce(function (counts, cell) { return increment(counts, cell); }, initial);\r\n\t    if (counts.undefined === length)\r\n\t        return 0;\r\n\t    if (counts.true === length)\r\n\t        return Infinity;\r\n\t    if (counts.false === length)\r\n\t        return -Infinity;\r\n\t    if (counts.false === 0)\r\n\t        return Math.pow(2, counts.true);\r\n\t    if (counts.true === 0)\r\n\t        return -Math.pow(2, counts.false);\r\n\t    return 0;\r\n\t}\r\n\texports.evaluateCells = evaluateCells;\r\n\tfunction increment(obj, key) {\r\n\t    var newObj = {};\r\n\t    for (var prop in obj)\r\n\t        if (obj.hasOwnProperty(prop))\r\n\t            newObj[prop] = obj[prop];\r\n\t    newObj[key + '']++;\r\n\t    return newObj;\r\n\t}\r\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar helpers_1 = __webpack_require__(6);\r\n\tfunction getArray(length) {\r\n\t    return Array.apply(null, { length: length }).map(Number.call, Number);\r\n\t}\r\n\tfunction getRows(grid) {\r\n\t    var size = Math.sqrt(grid.length);\r\n\t    var copy = grid.concat([]);\r\n\t    return getArray(size).map(function () { return copy.splice(0, size); });\r\n\t}\r\n\texports.getRows = getRows;\r\n\tfunction getColumns(grid) {\r\n\t    return getRows(helpers_1.transpose(grid));\r\n\t}\r\n\texports.getColumns = getColumns;\r\n\tfunction getDiagonals(grid) {\r\n\t    var size = Math.sqrt(grid.length);\r\n\t    var lesser = size - 1;\r\n\t    var last = grid.length - 1;\r\n\t    return [\r\n\t        grid.filter(function (x, i) { return Math.floor(i / size) === i % size; }),\r\n\t        grid.filter(function (x, i) { return i > 0 && i < last && i % lesser === 0; })\r\n\t    ];\r\n\t}\r\n\texports.getDiagonals = getDiagonals;\r\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tfunction transpose(grid) {\r\n\t    var size = Math.sqrt(grid.length);\r\n\t    return grid.map(function (x, i) { return grid[Math.floor(i / size) + ((i % size) * size)]; });\r\n\t}\r\n\texports.transpose = transpose;\r\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar helpers_1 = __webpack_require__(8);\r\n\tfunction nextValue(grid) {\r\n\t    return grid.filter(function (cell) { return cell != undefined; }).length % 2 == 0;\r\n\t}\r\n\texports.nextValue = nextValue;\r\n\tfunction makeMove(grid, move, forX) {\r\n\t    var newValue = forX(grid);\r\n\t    return grid.map(function (value, index) { return index == move ? newValue : value; });\r\n\t}\r\n\texports.makeMove = makeMove;\r\n\tfunction hasGameEnded(grid) {\r\n\t    return helpers_1.hasXWon(grid) || helpers_1.hasOWon(grid) || helpers_1.isDraw(grid);\r\n\t}\r\n\texports.hasGameEnded = hasGameEnded;\r\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\r\n\tvar utils_1 = __webpack_require__(5);\r\n\tfunction doesAnyArrayHaveAll(cellsArray, value) {\r\n\t    return cellsArray.some(function (cells) { return cells.every(function (cell) { return cell === value; }); });\r\n\t}\r\n\tfunction hasWon(grid, forX) {\r\n\t    return doesAnyArrayHaveAll(utils_1.getRows(grid), forX)\r\n\t        || doesAnyArrayHaveAll(utils_1.getColumns(grid), forX)\r\n\t        || doesAnyArrayHaveAll(utils_1.getDiagonals(grid), forX);\r\n\t}\r\n\tfunction hasXWon(grid) {\r\n\t    return hasWon(grid, true);\r\n\t}\r\n\texports.hasXWon = hasXWon;\r\n\tfunction hasOWon(grid) {\r\n\t    return hasWon(grid, false);\r\n\t}\r\n\texports.hasOWon = hasOWon;\r\n\tfunction isDraw(grid) {\r\n\t    return grid.filter(function (cell) { return cell != undefined; }).length === grid.length;\r\n\t}\r\n\texports.isDraw = isDraw;\r\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\r\n\tfunction alphaBeta(node, depth, alpha, beta, isMaximizingPlayer, evaluate, isTerminalNode, getChildren) {\r\n\t    if (depth == 0 || isTerminalNode(node))\r\n\t        return evaluate(node);\r\n\t    if (isMaximizingPlayer) {\r\n\t        var score_1 = -Infinity;\r\n\t        var children_1 = getChildren(node);\r\n\t        for (var i = 0; i < children_1.length; i++) {\r\n\t            var child = children_1[i];\r\n\t            score_1 = Math.max(score_1, alphaBeta(child, depth - 1, alpha, beta, false, evaluate, isTerminalNode, getChildren));\r\n\t            alpha = Math.max(alpha, score_1);\r\n\t            if (beta <= alpha)\r\n\t                break;\r\n\t        }\r\n\t        return score_1;\r\n\t    }\r\n\t    var score = Infinity;\r\n\t    var children = getChildren(node);\r\n\t    for (var i = 0; i < children.length; i++) {\r\n\t        var child = children[i];\r\n\t        score = Math.min(score, alphaBeta(child, depth - 1, alpha, beta, false, evaluate, isTerminalNode, getChildren));\r\n\t        beta = Math.min(beta, score);\r\n\t        if (beta <= alpha)\r\n\t            break;\r\n\t    }\r\n\t    return score;\r\n\t}\r\n\texports.alphaBeta = alphaBeta;\r\n\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// docs/tictactoe-ai.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5e82e64b58574cd7f87c","import { getBestMove } from './search';\n\nexport default {\n  getBestMove\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.ts","import { getMoves } from '../moves';\nimport { evaluate } from '../evaluation';\nimport { makeMove, hasGameEnded } from '../game';\nimport { Grid, Move } from '../definitions';\nimport { alphaBeta } from './alphaBeta';\n\nexport function getBestMove(grid: Grid, forX: (grid: Grid) => boolean,\n  depth?: number): Move {\n  const moves = getMoves(grid);\n  if (depth == undefined) depth = moves.length;\n  const isX = forX(grid);\n  const movesWithScores = moves.map(move => {\n    const newGrid = makeMove(grid, move, forX);\n    const evaluation = alphaBeta(newGrid, depth, -Infinity, Infinity, !isX,\n      evaluate, hasGameEnded,\n      grid => getMoves(grid).map(move => makeMove(grid, move, forX)));\n    return {\n      move,\n      score: isX ? evaluation : -evaluation\n    };\n  });\n  const sortedMovesWithScores =\n    movesWithScores.sort((a, b) => b.score - a.score);\n  const sortedMoves = sortedMovesWithScores.map(x => x.move);\n  // Return the move with the best evaluation so far\n  return sortedMoves[0];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/search/index.ts","import { Grid, Move } from './definitions';\n\nexport function getMoves(grid: Grid): Move[] {\n  return grid\n          .map((value, index) => value == undefined ? index : undefined)\n          .filter(value => value != undefined);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/moves.ts","import { Grid } from '../definitions';\nimport { evaluateRows, evaluateColumns, evaluateDiagonals } from './helpers';\n\nexport function evaluate(grid: Grid): number {\n  return evaluateRows(grid) + evaluateColumns(grid) + evaluateDiagonals(grid);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/evaluation/index.ts","import { getRows, getColumns, getDiagonals } from '../utils';\nimport { Grid, Cell } from '../definitions';\n\nexport function evaluateRows(grid: Grid): number {\n  return getRows(grid)\n    .map(evaluateCells)\n    .reduce((x, y) => x + y, 0);\n}\n\nexport function evaluateColumns(grid: Grid): number {\n  return getColumns(grid)\n    .map(evaluateCells)\n    .reduce((x, y) => x + y, 0);\n}\n\nexport function evaluateDiagonals(grid: Grid): number {\n  return getDiagonals(grid)\n    .map(evaluateCells)\n    .reduce((x, y) => x + y, 0);\n}\n\nexport function evaluateCells(cells: Cell[]): number {\n  const length = cells.length;\n  if(length === 0) return 0;\n  const initial = { undefined: 0, true: 0, false: 0 };\n  const counts = cells.reduce((counts, cell) => increment(counts, cell), initial);\n  if (counts.undefined === length) return 0;\n  if (counts.true === length) return Infinity;\n  if (counts.false === length) return -Infinity;\n  if (counts.false === 0) return Math.pow(2, counts.true);\n  if (counts.true === 0) return -Math.pow(2, counts.false);\n  return 0;\n}\n\nfunction increment<T>(obj: T, key: any): T {\n  const newObj = {} as T;\n  for(let prop in obj)\n    if(obj.hasOwnProperty(prop))\n      newObj[prop] = obj[prop];\n  newObj[key+'']++;\n  return newObj;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/evaluation/helpers.ts","import { transpose } from './helpers';\n\nfunction getArray(length: number): number[] {\n  return Array.apply(null, { length }).map(Number.call, Number);\n}\n\nexport function getRows<T>(grid: T[]): T[][] {\n  const size = Math.sqrt(grid.length);\n  const copy = grid.concat([]);\n  return getArray(size).map(() => copy.splice(0, size));\n}\n\nexport function getColumns<T>(grid: T[]): T[][] {\n  return getRows(transpose(grid));\n}\n\nexport function getDiagonals<T>(grid: T[]): T[][] {\n  const size = Math.sqrt(grid.length);\n  const lesser = size - 1;\n  const last = grid.length - 1;\n  return [\n    grid.filter((x, i) => Math.floor(i / size) === i % size),\n    grid.filter((x, i) => i > 0 && i < last && i % lesser === 0)\n  ];\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/index.ts","export function transpose<T>(grid: Array<T>): Array<T> {\n  const size = Math.sqrt(grid.length);\n  return grid.map((x, i) => grid[Math.floor(i / size) + ((i % size) * size)]);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/helpers.ts","import { Grid, Move } from '../definitions';\nimport { hasXWon, hasOWon, isDraw } from './helpers';\n\nexport function nextValue(grid: Grid): boolean {\n  return grid.filter(cell => cell != undefined).length % 2 == 0;\n}\n\nexport function makeMove(grid: Grid, move: Move, forX: (grid: Grid) => boolean): Grid {\n  const newValue = forX(grid);\n  return grid.map((value, index) => index == move ? newValue : value);\n}\n\nexport function hasGameEnded(grid: Grid): boolean {\n  return hasXWon(grid) || hasOWon(grid) || isDraw(grid);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/index.ts","import { Grid, Cell } from '../definitions';\nimport { getRows, getColumns, getDiagonals } from '../utils';\n\nfunction doesAnyArrayHaveAll(cellsArray: Cell[][], value: boolean): boolean {\n  return cellsArray.some(cells => cells.every(cell => cell === value));\n}\n\nfunction hasWon(grid: Grid, forX: boolean): boolean {\n  return doesAnyArrayHaveAll(getRows(grid), forX)\n    || doesAnyArrayHaveAll(getColumns(grid), forX)\n    || doesAnyArrayHaveAll(getDiagonals(grid), forX);\n}\n\nexport function hasXWon(grid: Grid): boolean {\n  return hasWon(grid, true);\n}\n\nexport function hasOWon(grid: Grid): boolean {\n  return hasWon(grid, false);\n}\n\nexport function isDraw(grid: Grid): boolean {\n  return grid.filter(cell => cell != undefined).length === grid.length;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/game/helpers.ts","export function alphaBeta<TNode>(node: TNode, depth: number, alpha: number,\n  beta: number, isMaximizingPlayer: boolean, evaluate: (node: TNode) => number,\n  isTerminalNode: (node: TNode) => boolean, getChildren: (node: TNode) => TNode[]) {\n  if (depth == 0 || isTerminalNode(node)) return evaluate(node);\n  if (isMaximizingPlayer) {\n    let score = -Infinity;\n    const children = getChildren(node);\n    for (let i = 0; i < children.length; i++) {\n      let child = children[i];\n      score = Math.max(score,\n        alphaBeta(child, depth - 1, alpha, beta, false, evaluate, isTerminalNode,\n          getChildren));\n      alpha = Math.max(alpha, score);\n      if (beta <= alpha) break;\n    }\n    return score;\n  }\n  let score = Infinity;\n  const children = getChildren(node);\n  for (let i = 0; i < children.length; i++) {\n    let child = children[i];\n    score = Math.min(score,\n      alphaBeta(child, depth - 1, alpha, beta, false, evaluate, isTerminalNode,\n        getChildren));\n    beta = Math.min(beta, score);\n    if (beta <= alpha) break;\n  }\n  return score;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/search/alphaBeta.ts"],"sourceRoot":""}